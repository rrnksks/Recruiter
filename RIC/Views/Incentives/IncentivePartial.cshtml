@model IEnumerable<DBLibrary.GetIncentiveResult>
@using System.Globalization;
@using DBLibrary;
@{
    ViewBag.Title = "Index";

}
<link href="~/Content/CSS/Incentive.css" rel="stylesheet" />

@*<legend>Incentives for @SystemClock.US_Date.Year </legend>*@

<table class="table">
    <thead class="MainTableHeadBgIncentive">
        <tr>

            <th class="labelcenter">
                @Html.DisplayNameFor(model => model.Details)
            </th>
            <th class="labelcenter">
                @Html.DisplayNameFor(model => model.FirstOrDefault().JANUARY)
            </th>
            <th class="labelcenter">
                @Html.DisplayNameFor(model => model.FirstOrDefault().FEBRUARY)
            </th>
            <th class="labelcenter">
                @Html.DisplayNameFor(model => model.FirstOrDefault().MARCH)
            </th>
            <th class="labelcenter">
                @Html.DisplayNameFor(model => model.FirstOrDefault().APRIL)
            </th>
            <th class="labelcenter">
                @Html.DisplayNameFor(model => model.FirstOrDefault().MAY)
            </th>
            <th class="labelcenter">
                @Html.DisplayNameFor(model => model.FirstOrDefault().JUNE)
            </th>
            <th class="labelcenter">
                @Html.DisplayNameFor(model => model.FirstOrDefault().JULY)
            </th>
            <th class="labelcenter">
                @Html.DisplayNameFor(model => model.FirstOrDefault().AUGUST)
            </th>
            <th class="labelcenter">
                @Html.DisplayNameFor(model => model.FirstOrDefault().SEPTEMBER)
            </th>
            <th class="labelcenter">
                @Html.DisplayNameFor(model => model.FirstOrDefault().OCTOBER)
            </th>
            <th class="labelcenter">
                @Html.DisplayNameFor(model => model.FirstOrDefault().NOVEMBER)
            </th>
            <th class="labelcenter">
                @Html.DisplayNameFor(model => model.FirstOrDefault().DECEMBER)
            </th>
        </tr>
    </thead>
    <tbody>

        @foreach (var item in Model)
        {
            <tr>
                <td style="width: 17%; text-align: left !important; font-weight: bold">

                    @Html.DisplayFor(modelItem => item.Details)
                </td>
                <td>

                    <a href="javascript:void(0);" class="linkColor anchorDetail" data-ShowTotal="@item.Details" data-Date="JANUARY">@item.JANUARY</a>

                </td>
                <td>
                    <a href="javascript:void(0);" class="linkColor anchorDetail" data-ShowTotal="@item.Details" data-Date="FEBRUARY">@item.FEBRUARY</a>
                    @*@Html.DisplayFor(modelItem => item.TotalStart)*@
                </td>
                <td>
                    <a href="javascript:void(0);" class="linkColor anchorDetail" data-ShowTotal="@item.Details" data-Date="MARCH">@item.MARCH</a>
                    @* @Html.DisplayFor(modelItem => item.TotalMargin)*@
                </td>
                <td>
                    <a href="javascript:void(0);" class="linkColor anchorDetail" data-ShowTotal="@item.Details" data-Date="APRIL">@item.APRIL</a>
                    @* @Html.DisplayFor(modelItem => item.TotalIncentive)*@
                </td>
                <td>
                    <a href="javascript:void(0);" class="linkColor anchorDetail" data-ShowTotal="@item.Details" data-Date="MAY">@item.MAY</a>

                </td>

                <td>
                    <a href="javascript:void(0);" class="linkColor anchorDetail" data-ShowTotal="@item.Details" data-Date="JUNE">@item.JUNE</a>

                </td>
                <td>
                    <a href="javascript:void(0);" class="linkColor anchorDetail" data-ShowTotal="@item.Details" data-Date="JULY">@item.JULY</a>

                </td>
                <td>
                    <a href="javascript:void(0);" class="linkColor anchorDetail" data-ShowTotal="@item.Details" data-Date="AUGUST">@item.AUGUST</a>

                </td>
                <td>
                    <a href="javascript:void(0);" class="linkColor anchorDetail" data-ShowTotal="@item.Details" data-Date="SEPTEMBER">@item.SEPTEMBER</a>

                </td>
                <td>
                    <a href="javascript:void(0);" class="linkColor anchorDetail" data-ShowTotal="@item.Details" data-Date="OCTOBER">@item.OCTOBER</a>

                </td>
                <td>
                    <a href="javascript:void(0);" class="linkColor anchorDetail" data-ShowTotal="@item.Details" data-Date="NOVEMBER">@item.NOVEMBER</a>

                </td>
                <td>
                    <a href="javascript:void(0);" class="linkColor anchorDetail" data-ShowTotal="@item.Details" data-Date="DECEMBER">@item.DECEMBER</a>
                </td>


            </tr>
        }
    </tbody>
</table>


@if (ViewBag.Year == 2019)
{
    <br />
    <table class="table" style="width:50%;margin-left: 27%;">
        <thead class="MainTableHeadBgIncentive">
            <tr>

                <th class="labelcenter">
                    Total Recurring Paid
                </th>
                <th class="labelcenter">
                    One Time Incentive
                </th>
                <th class="labelcenter">
                    Final Difference
                </th>
            </tr>
        </thead>
        <tbody>

            <tr>

                <td style="background-color:#eed;color:black;">
                    @if (@Model.FirstOrDefault().IncentiveResultData.Count() > 0)
                    {
                        <a href="javascript:void(0);" class="linkColor anchorDetail" data-Type="RecurringPaid">@Model.FirstOrDefault().IncentiveResultData.FirstOrDefault().RI_TotalRecurringPaid</a>

                    }
                    else
                    {
                        <label>0</label>

                    }

                </td>
                <td style="background-color:#eed;color:black;">
                    @if (@Model.FirstOrDefault().IncentiveResultData.Count() > 0)
                    {
                        <a href="javascript:void(0);" class="linkColor anchorDetail" data-Type="OneTimeIncentive">@Model.FirstOrDefault().IncentiveResultData.FirstOrDefault().RI_OneTimeIncentive</a>

                    }
                    else
                    {
                        <label>0</label>

                    }
                </td>
                <td style="background-color:#eed;color:black;">
                    @if (@Model.FirstOrDefault().IncentiveResultData.Count() > 0)
                    {
                        <a href="javascript:void(0);" class="linkColor anchorDetail" data-Type="FinalDiffrence">@Model.FirstOrDefault().IncentiveResultData.FirstOrDefault().RI_finalDifference</a>

                    }
                    else
                    {
                        <label>0</label>

                    }
                </td>
            </tr>

        </tbody>
    </table>
}

<div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog modal-lg ">
        <div id='myModalContent'></div>
    </div>
</div>


<script type="text/javascript">
    $(document).ready(function () {

        var TeamDetailPostBackURL = '@Url.Action("ViewIncentivePopup")';
        $(function () {
            $(".anchorDetail").click(function () {
                var getYear = $("#yearTextLable").text();

                //var empCD = $("#HdnEmpCD").val();
                var $buttonClicked = $(this);
                var Date = $buttonClicked.attr('data-Date');
                var showTotal = $buttonClicked.attr('data-ShowTotal');
                var getType = $buttonClicked.attr('data-Type');
                //var toDate = $buttonClicked.attr('data-ToDate');
                //var jr = $buttonClicked.attr('data-Jr');

                var options = { "backdrop": "static", keyboard: true };
                $.ajax({
                    type: "GET",
                    url: TeamDetailPostBackURL,
                    datatype: "json",
                    data: { "Date": Date, "showTotal": showTotal, "Year": getYear,"getType":getType },
                    success: function (data) {

                        $('#myModalContent').html(data);
                        $('#myModal').modal(options);
                        $('#myModal').modal('show');
                        //$("#myModal").dialog();
                    },
                    error: function () {
                       // alert("Dynamic content load failed.");
                    }
                });
            });
            //$("#closebtn").on('click',function(){
            //    $('#myModal').modal('hide');

            $("#closbtn").click(function () {
                $('#myModal').modal('hide');
            });
        });
    });
</script>